%! Author = kyoto
%! Date = 08.03.2022


\section{Задание}
Синтезировать цикл исполнения для выданных преподавателем команд. Разработать тестовые программы, которые проверяют
каждую из синтезированных команд. Загрузить в микропрограммную память БЭВМ циклы исполнения синтезированных команд,
загрузить в основную память БЭВМ тестовые программы. Проверить и отладить разработанные тестовые программы и микропрограммы.\\


\begin{figure}[H]
    \centering
    \includegraphics[scale=0.5]{img/variant}
\end{figure}


\section{Программа}
\begin{center}
    \begin{tabular}{|c|c|c|}
        \hline
        Адрес   & Микрокоманда & Действие   \\
        \hline
        01  & 00A0009004    & IP → BR, AR   \\
        \hline
        02  & 0104009420    & BR + 1 → IP; MEM(AR) → DR \\
        \hline
        03  & 0002009001    & DR → CR   \\
        \hline
        04  & 8109804002    & if CR(15) = 1 then GOTO CHKBR @ 09    \\
        \hline
        05  & 810C404002    & if CR(14) = 1 then GOTO CHKABS @ 0C   \\
        \hline
        06  & 810C204002    & if CR(13) = 1 then GOTO CHKABS @ 0C   \\
        \hline
        07  & 8078104002    & if CR(12) = 0 then GOTO ADDRLESS @ 78 \\
        \hline
        78  & 81A4084002    & if CR(11) = 1 then GOTO AL1XXX @ A4   \\
        \hline
        A4  & 81B5044002    & if CR(10) = 1 then GOTO AL11XX @ B5   \\
        \hline
        B5  & 81BB024002    & if CR(9) = 1 then GOTO AL111X @ BB    \\
        \hline
        BB  & 81E0014002    & if CR(8) = 1 then GOTO RESERVED @ E0  \\
        \hline
        E0  & 80E2801002    & if CR(7) = 0 then GOTO @ E2; \\
        \hline
        E1  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        E2  & 80E4401002    & if CR(6) = 0 then GOTO @ E4; \\
        \hline
        E3  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        E4  & 80E6201002    & if CR(5) = 0 then GOTO @ E6; \\
        \hline
        E5  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        E6  & 80E8101002    & if CR(4) = 0 then GOTO @ E8; \\
        \hline
        E7  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        E8  & 80EA081002    & if CR(3) = 0 then GOTO @ EA; \\
        \hline
        E9  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        EA  & 80EC041002    & if CR(2) = 0 then GOTO @ EC; \\
        \hline
        EB  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        EC  & 80EE021002    & if CR(1) = 0 then GOTO @ EE; \\
        \hline
        ED  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        EE  & 81F0011002    & if CR(0) = 1 then GOTO @ F0; \\
        \hline
        EF  & 8001101040    & GOTO INFETCH @ 01 \\
        \hline
        F0  & 00A0009008    & SP -> AR, BR; \\
        \hline
        F1  & 0120009410    & BR + 1 -> BR; MEM(AR) -> DR; \\
        \hline
        F2  & 0080009020    & BR -> AR; \\
        \hline
        F3  & 0020009001    & DR -> BR; \\
        \hline
        F4  & 0100000000    & MEM(AR) -> DR; \\
        \hline
        F5  & 0080009008    & SP -> AR; \\
        \hline
        F6  & 0200000000    & DR -> MEM(AR); \\
        \hline
        F7  & 0001009020    & BR -> DR; \\
        \hline
        F8  & 0080009208    & ~0 + SP -> AR; \\
        \hline
        F9  & 0200000000    & DR -> MEM(AR); \\
        \hline
        FA  & 80C4101040    & GOTO INT @ C4 \\
        \hline
    \end{tabular}
\end{center}

%
%\section{Методика проверки.}
%Проверка обработки прерываний:
%\begin{enumerate}
%    \item Загрузить текст программы в БЭВМ во вкладку Assembler.
%    \item Заменить NOP в тексте программы на HLT.
%    \item Запустить программу в режиме РАБОТА.
%    \item Установить «Готовность ВУ-1».
%    \item Дождаться остановки программы.
%    \item Записать текущее значение X из памяти БЭВМ:
%    \begin{enumerate}
%        \item Запомнить текущее состояние счетчика команд.
%        \item Ввести в клавишный регистр значение 0x02E
%        \item Нажать «Ввод адреса».
%        \item Нажать «Чтение».
%        \item Записать значение регистра данных.
%        \item Вернуть счетчик команд в исходное состояние.
%    \end{enumerate}
%    \item  Записать результат обработки прерывания – содержимое DR контроллера ВУ-1
%    \item Рассчитать ожидаемое значение обработки прерывания по формуле $3*X-5$, записать его
%    \item Сверить ожидаемые данные с полученными.
%    \item Нажать «Продолжение».
%    \item Ввести в ВУ-2 произвольный набор нулей и единиц, записать его
%    \item Установить «Готовность ВУ-2».
%    \item Дождаться остановки программы.
%    \item Записать текущее значение X из памяти БЭВМ (аналогично п.6).
%    \item Нажать «Продолжение».
%    \item Записать текущее значение X из памяти БЭВМ (аналогично п.6).
%    \item Рассчитать ожидаемое значение переменной X после обработки прерывания \\
%    (Если X будет меньше минимального из ОДЗ, то запишется нижняя граница.)
%    \item Проверить правильность маскирования полученного числа последними\\
%    Четырьмя битами из введённого набора на ВУ.
%\end{enumerate}
%Проверка основной программы:
%\begin{enumerate}
%    \item Загрузить текст программы в БЭВМ.
%    \item Записать в переменную X значение, меньшее минимального доступного по ОДЗ (X < -41)
%    \begin{enumerate}
%        \item Записать значение IP.
%        \item Ввести адрес 0х2Е.
%        \item Ввести желаемое значение в Input Register.
%        \item Нажать "Запись".
%        \item Вернуть в IR исходный IP.
%        \item Нажать "Ввод адреса".
%    \end{enumerate}
%    \item Запустить программу в режиме попрограммного выполнения.
%    \item Убедиться, что при первой итерации в X записывается минимальное значение по ОДЗ (FFD7) (аналогично п.6 из предыдущей инструкции)
%    \item Пройти нужное количество шагов программы, убедиться, что при увеличении X на 1, до того момента, когда он равен 45, происходит сброс значения в
%    минимальное по ОДЗ (FFD7).
%\end{enumerate}
%
%Проверка обработки прерываний с ВУ-1:
%\begin{center}
%    \begin{tabular}{|c|c|c|c|}
%        \hline
%        X   & Предполагаемый результат & Полученный результат & Верно? \\
%        \hline
%        0x4 & $3*4-5=7$                & 0x7                  & да.    \\
%        \hline
%    \end{tabular}
%\end{center}
%Проверка обработки прерываний с ВУ-2:
%\begin{center}
%    \begin{tabular}{|c|c|c|c|c|}
%        \hline
%        Введённые данные с ВУ-2 & $X_{orig}$ & Предполагаемый результат & $X_{res}$ & Верно? \\
%        \hline
%        1010 0101               & 0xB (1011) & 1 (0001)                 & 1(0001)   & да.    \\
%        \hline
%    \end{tabular}
%\end{center}
%Проверка работы основной программы (случай выхода из ОДЗ):
%\begin{center}
%    \begin{tabular}{|c|c|c|c|}
%        \hline
%        Значение икса перед & Какое значение должно  & Какой получился & Верно? \\
%        выходом из ОДЗ      & было быть без проверки &                 &        \\
%        \hline
%        0x2C                & 0x2D                   & 0xFFD7          & да.    \\
%        0xFFD0              & 0xFFD1                 & 0xFFD7          & да.    \\
%        \hline
%    \end{tabular}
%\end{center}
